var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,k,g){b instanceof String&&(b=String(b));for(var h=b.length,l=0;l<h;l++){var w=b[l];if(k.call(g,w,l,b))return{i:l,v:w}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,g){b!=Array.prototype&&b!=Object.prototype&&(b[k]=g.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,k,g,h){if(k){g=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var l=b[h];l in g||(g[l]={});g=g[l]}b=b[b.length-1];h=g[b];k=k(h);k!=h&&null!=k&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,g){return $jscomp.findInternal(this,b,g).v}},"es6","es3");"use strict";
(function(b,k){b.fn.select=function(g,h,l,k,R,S,T){function y(){}function w(){c.find(".select-item").click(function(){b(this).parent("li")});b("#"+d+"__items-box").find(".tree li>.unfold-icon").click(function(a){a.stopPropagation();a=b(this).parent("li");a.hasClass("tree-unfold")?(a.removeClass("tree-unfold"),a.find(">ul").hide()):(a.addClass("tree-unfold"),a.find(">ul").show())});b("#"+d+"__items-box").find(".select-item").click(function(a){a.stopPropagation();a=b(this).parent("li");if(f.multiple)if(f.selectParent)if(f.duplicate)q(a.data("value"),
a.data("text"));else{var e=x();-1==b.inArray(a.data("value"),e)&&(q(a.data("value"),a.data("text")),a.hide(),a.attr("disabled","disabled"))}else 0<a.find("ul>li .select-item").length?a.hasClass("tree-unfold")?(a.removeClass("tree-unfold"),a.find(">ul").hide()):(a.addClass("tree-unfold"),a.find(">ul").show()):f.duplicate?q(a.data("value"),a.data("text")):(e=x(),-1==b.inArray(a.data("value"),e)&&(q(a.data("value"),a.data("text")),a.hide(),a.attr("disabled","disabled")));else c.data("selected-finish")||
(f.selectParent?(q(a.data("value"),a.data("text")),c.data("selected-finish",!0),c.find(".select-option").attr("disabled","disabled")):0<a.find("ul>li .select-item").length?a.hasClass("tree-unfold")?(a.removeClass("tree-unfold"),a.find(">ul").hide()):(a.addClass("tree-unfold"),a.find(">ul").show()):(q(a.data("value"),a.data("text")),c.data("selected-finish",!0),c.find(".select-option").attr("disabled","disabled")))})}function q(a,e){D();var t=Number(Math.random().toString().substr(3,length)+Date.now()).toString(36);
b('<li class="selected-item" data-uid="'+t+'" data-value="'+a+'" data-text="'+e+'"><span>'+e+'</span><i class="selected-icon select-icon select-icon-close"></i></li>').appendTo(c.find(".selected-items"));b('<input type="hidden" name="'+u+'" data-uid="'+t+'"  value="'+a+'"></input>').appendTo(b("#"+d+"__inputs"));f.closeOnSelect&&z();b("#"+d+"__selected-items").on("click",".selected-icon",function(a){a.stopPropagation();a=b(this).parent(".selected-item");if(f.multiple){var e=b("#"+d+"__items-box .select-option[data-value="+
a.data("value")+"]:hidden");0<e.length&&(e.removeAttr("disabled"),e.show())}else selectItems=b("#"+d+"__items-box .select-option"),selectItems.removeAttr("disabled"),selectItems.show(),c.data("selected-finish",!1);e=a.data("uid");b("#"+d+"__inputs").find("input[data-uid="+e+"]").remove();a.remove();0<c.find(".selected-item").length?D():A()})}function A(){f.placeholder&&0==b("#"+d+"__selected-items>.placeholder").length&&b('<li class="placeholder">'+f.placeholder+"</li>").appendTo(b("#"+d+"__selected-items"))}
function D(){f.placeholder&&b("#"+d+"__selected-items>.placeholder").remove()}function z(){c.find(".dropdown-items").hide();c.find("#"+d+"__select-input").val("")}function F(a){var e=c.data("selectedValues");e=e?e:x();e="string"==typeof e?JSON.parse(e):e;return G(a.nodes,0,e)}function G(a,e,d){var E=b('<ul class="tree" style="'+(0!=e?"padding-left: 16px;display: none;":"")+'"></ul>'),t;for(t in a){var g=a[t],k=void 0;var h=g;var l=h.icon?h.icon:"",m=h.value,n=h.text,p=h.selected,r=!1;if(f.multiple)for(k in d)d[k]==
m&&(r=p=!0);else c.data("selected-finish")&&(r=!0);k=b('<li class="select-option" data-icon="'+l+'" data-value="'+m+'" data-text="'+n+'" '+(r?'disabled="disabled" ':"")+(p?'style="display:none;"':"")+'><i class="item-icon select-icon '+l+'"></i><span  class="select-item">'+n+"</span></li>");h.selected&&q(m,n);h=k;g.nodes&&(h.append('<i class="unfold-icon select-icon select-icon-enter"></i>'),G(g.nodes,++e,d).appendTo(h));h.appendTo(E)}return E}function H(a){var e=0;b("#"+d+"__items-box").find(".select-option").each(function(c,
d){c=b(d);d=c.find(">.select-item");var f=c.data("text");c.data("value");var g=f.indexOf(a);a&&0!=a.length?-1<g?(d.html(f.slice(0,g)+'<span class="search-result">'+a+"</span>"+f.slice(g+a.length)),c.attr("disabled")||(c.show(),c.parents(".select-option").show()),e++):c.hide():(d.html(f),c.attr("disabled")||(c.show(),c.parents(".select-option").show()),e++)});var c=b("#"+d+"__select-remind-box");0==e?(c.html("\u65e0\u5339\u914d\u7684\u9009\u9879\uff01"),c.show()):(c.html(""),c.hide())}function r(a,
e){I?(J!=a?e=1:e||(e=m),e=I(B,a,n,e),void 0!=e&&null!=e&&C(e),J=a):U("\u9519\u8bef","\u672a\u63d0\u4f9b\u6570\u636e\u6e90\u51fd\u6570!")}function V(){c.empty();var a='\x3c!--\u5206\u9875\u533a--\x3e<div class="select-pagination" id="'+d+'__pagination"><i class="select-pagination-button select-icon select-icon-skip-previous"></i><i class="select-pagination-button select-icon select-icon-chevron-left"></i><span class="select-pagination-text" id="'+d+'__pagination-pageNo">0</span><span class="select-pagination-text">/</span><span class="select-pagination-text"  id="'+
d+'__pagination-pageNum">0</span><i class="select-pagination-button select-icon select-icon-chevron-right"></i><i class="select-pagination-button select-icon select-icon-skip-next"></i></div>';c.append('<div class="selected-bar"><ul class="selected-items" id="'+d+'__selected-items">'+(f.placeholder?'<li class="placeholder">'+f.placeholder+"</li>":"")+'</ul><div id="'+d+'__inputs" style="display:none;"></div><span class="refresh-btn select-icon select-icon-refresh" id="'+d+'__refresh-btn"></span></div><div class="dropdown-items" id="'+
d+'__dropdown_items" style="width: calc('+c.width()+'px - 2px); display: none;"><div class="search-bar"><input class="search-input" id="'+d+'__select-input" placeholder="'+("local"==f.mode?f.local.searchPlaceholder:f.remote.searchPlaceholder)+'"><span class="search-btn select-icon '+("local"==f.mode?"select-icon-filter":"select-icon-search")+'" id="'+d+'__search-btn"></span></div><div class="items-box" id="'+d+'__items-box"></div>'+("remote"==f.mode?a:"")+'\x3c!--\u4fe1\u606f\u63d0\u793a\u533a--\x3e<div class="select-remind-box" id="'+
d+'__select-remind-box" style="display: none;">\t\u65e0\u5339\u914d\u7684\u9009\u9879\uff01</div></div>');b(document).on("click",function(a){c.is(a.target)||0<c.has(a.target).length||(z(),a.stopPropagation())});b("#"+d+" .selected-bar").click(function(a){c.find(".dropdown-items").toggle()});b("#"+d+" .search-btn").click(function(a){a=b("#"+d+"__select-input").val();"local"==f.mode?H(a):r(a)});b("#"+d+"__select-input").keyup(function(a){f.enterSearch&&13!=event.keyCode||(a.stopPropagation(),a=b(a.target).val(),
"local"==f.mode?H(a):r(a))});b("#"+d+"__refresh-btn").click(function(a){a.stopPropagation();c.data("selected-finish",!1);z();K();A();a=b("#"+d+"__select-remind-box");a.html("");a.hide();"local"!=f.mode&&C({})});"remote"==f.mode&&(b("#"+d+"__pagination .select-icon-chevron-left").click(function(a){a.stopPropagation();a=b("#"+d+"__select-input").val();r(a,Math.max(0<m?m-1:1,1))}),b("#"+d+"__pagination .select-icon-skip-previous").click(function(a){a.stopPropagation();a=b("#"+d+"__select-input").val();
r(a,1)}),b("#"+d+"__pagination .select-icon-chevron-right").click(function(a){a.stopPropagation();a=b("#"+d+"__select-input").val();var c=Math.min(m+1,L());r(a,c)}),b("#"+d+"__pagination .select-icon-skip-next").click(function(a){a.stopPropagation();a=b("#"+d+"__select-input").val();r(a,L())}));(a=c.data("dataSource"))&&F(a)}function L(){var a=1;0==p?a=1:Math.floor((p-1)/n+1)>m&&(a=Math.floor((p-1)/n+1));return a}function M(a){b("#"+d+"__pagination-pageNum").html(a);v=a;c.data("pageNum",a)}function N(a){b("#"+
d+"__pagination-pageNo").html(a);m=a;c.data("pageNo",m)}function C(a){if(void 0==a||null==a)a={};"string"==typeof a&&(a=JSON.parse(a));O();p=a.total?a.total:0;n=a.pageSize?a.pageSize:10;a.pageNo?N(a.pageNo):N(1);a.pageNum?M(a.pageNum):M(0);if(a.nodes&&0<a.nodes.length){F(a).appendTo(b("#"+d+"__items-box"));var e=P(a.nodes,null);c.data("dataSource",a);c.data("options",JSON.stringify(e));"remote"==f.mode&&(a=b("#"+d+"__select-remind-box"),a.html(""),a.hide())}else c.data("dataSource",a),c.data("options",
JSON.stringify([])),"remote"==f.mode&&(a=b("#"+d+"__select-remind-box"),a.html("\u6362\u4e2a\u5173\u952e\u5b57\u8bd5\u8bd5\uff01"),a.show());w()}function x(){var a=[];c.find(".selected-item").each(function(c,d){a.push(b(d).data("value"))});return a}function W(){var a=[];c.find(".selected-item").each(function(c,d){a.push(b(d).data("text"))});return a}function O(){b("#"+d+"__items-box").empty();c.data("dataSource","{}")}function K(){c.find(".selected-icon").each(function(a,c){a=b(c).parent(".selected-item");
c=b("#"+d+"__items-box .select-option[data-value="+a.data("value")+"]");c.removeAttr("disabled");c.show();a.remove()});c.data("selected-finish",!1);A()}function P(a,b){b||(b=[]);for(var c in a){var d=a[c],e={};e.value=d.value;e.text=d.text;b.push(e);d.nodes&&P(d.nodes,b)}return b}function Q(){var a=c.data("options");"string"==typeof a&&(a=JSON.parse(a));return a}var c=b(this),d=c.attr("id"),u=c.attr("name"),I=l,m=c.data("pageNo"),v=c.data("pageNum"),n=c.data("pageSize"),p=c.data("total");u=u?u:h?
h:d;m=m?m:1;v=v?v:0;n=n?n:10;p=p?p:0;var J="";g=g?g:JSON.parse(c.data("setting"));var f=b.extend({},{mode:"local",placeholder:"",length:"200px",topOffset:10,multiple:!1,selectParent:!1,duplicate:!1,disabled:!1,readonly:!1,closeOnSelect:!1,enterSearch:!1,local:{searchPlaceholder:"\u8bf7\u8f93\u5165\u8fc7\u6ee4\u8bcd"},remote:{searchPlaceholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u8bcd"}},g);c.data("name",u);c.data("pageNo",m);c.data("pageNum",v);c.data("pageSize",n);c.data("total",p);c.data("setting",
JSON.stringify(f));var U=k?k:function(a,b){alert(b)};y.prototype={constructor:y,select:function(a,b){return q(a,b)},draw:function(){V();return this},setDataSource:function(a){C(a);return this},getDataSource:function(){var a=c.data("dataSource");"string"==typeof a&&(a=JSON.parse(a));return a},setSelectedValue:function(a){"string"==typeof a&&(a=JSON.parse(a));var d=[],g;for(g in a){var h=a[g];-1==b.inArray(h,d)?d.push(h):f.duplicate&&d.push(h)}h=Q();for(var k=0;k<h.length;k++){var l=h[k];if(-1<b.inArray(l.value,
d))if(f.duplicate)for(g in d)l.value==d[g]&&q(l.value,l.text);else q(l.value,l.text)}c.data("selected-value",a);return this},getSelectedValue:function(){return x()},getSelectedText:function(){return W()},cleanSelecteds:function(){K();return this},getOptions:function(){return Q()},cleanOptions:function(){O();return this}};var B=new y(k,l,R,S,T,g);c.data("drawed")||(B.draw(),c.data("drawed",!0));return B}})(jQuery,window);
